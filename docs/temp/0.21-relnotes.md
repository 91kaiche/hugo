Hugo `0.21` brings full support for shortcodes per [Output Format](https://gohugo.io/extras/output-formats/)([#3220](https://github.com/spf13/hugo/issues/3220) ), putting in the last piece of this very useful puzzle we started to assemble in `0.20`. This is especially useful for Google AMP with its many custom media tags.

This release represents **126 contributions by 29 contributors** to the main Hugo code base.

[@bep](https://github.com/bep) leads the Hugo development with a significant amount of contributions, but also a big shoutout to [@moorereason](https://github.com/moorereason), [@bogem](https://github.com/bogem), and [@munnerz](https://github.com/munnerz) for their ongoing contributions. And as always a big thanks to [@digitalcraftsman](https://github.com/digitalcraftsman) for his relentless work on keeping the documentation and the themes site in pristine condition.

Hugo now has:

* 17156+ [stars](https://github.com/spf13/hugo/stargazers)
* 457+ [contributors](https://github.com/spf13/hugo/graphs/contributors)
* 163+ [themes](http://themes.gohugo.io/)

## Other Highlights

On a more technical side, [@moorereason](https://github.com/moorereason) and [@bep](https://github.com/bep)  have introduced namespaces for Hugo's many template funcs ([#3042](https://github.com/spf13/hugo/issues/3042) ). We realised that we have really many template funcs now, and adding more into that big pile would be a sure path toward loosing control.  So now they are nicely categorised into namespaces with its own tests and examples, with an API that the documentation site can use to make sure it is correct and up-to-date.

## Notes

* The deprecated `Extension`, `Now` and `TargetPath` will now `ERROR` [544f0a63](https://github.com/spf13/hugo/commit/544f0a6394b0e085d355e8217fc5bb3d96c12a98) [@bep](https://github.com/bep) 
* `disable404`, `disableRSS`, `disableSitemap`, `disableRobotsTXT` are now deprecated. Use `disableKinds`. [5794a265](https://github.com/spf13/hugo/commit/5794a265b41ffdeebfd8485eecf65cf4088d49d6) [@bep](https://github.com/bep) [#3345](https://github.com/spf13/hugo/issues/3345) 

## Enhancements

### Templates

* Re-add the time example [a119ef69](https://github.com/spf13/hugo/commit/a119ef693faf5dc346fec78ca8a18948ec65a993) [@bep](https://github.com/bep) 
* Add NumFmt function [93b3b138](https://github.com/spf13/hugo/commit/93b3b1386714999d716e03b131f77234248f1724) [@moorereason](https://github.com/moorereason) [#1444](https://github.com/spf13/hugo/issues/1444) 
* Make urlize return a string [3dd949d9](https://github.com/spf13/hugo/commit/3dd949d956390478da83b44488b0a5f4a9ebeb86) [@bep](https://github.com/bep) 
* Add template function namespaces [de7c32a1](https://github.com/spf13/hugo/commit/de7c32a1a880820252e922e0c9fcf69e109c0d1b) [@moorereason](https://github.com/moorereason) [#3042](https://github.com/spf13/hugo/issues/3042) 
* Add translation links to the default sitemap template [90d3fbf1](https://github.com/spf13/hugo/commit/90d3fbf1da93a279cfe994a226ae82cf5441deab) [@rayjolt](https://github.com/rayjolt) [#2569](https://github.com/spf13/hugo/issues/2569) 
* Allow text partials in HTML templates [1cf29200](https://github.com/spf13/hugo/commit/1cf29200b4bb0a9c006155ec76759b7f4b1ad925) [@bep](https://github.com/bep) [#3273](https://github.com/spf13/hugo/issues/3273) 

### Output

* Refactor site rendering with an "output format context" [1e4d082c](https://github.com/spf13/hugo/commit/1e4d082cf5b92fedbc60b1b4f0e9d1ee6ec45e33) [@bep](https://github.com/bep) [#3397](https://github.com/spf13/hugo/issues/3397) 
* Do not lower case template names [6d2ea0f7](https://github.com/spf13/hugo/commit/6d2ea0f7d7e8a54b8edfc36e52ff74266c30dc27) [@bep](https://github.com/bep) [#3333](https://github.com/spf13/hugo/issues/3333) 

### Core

* Handle shortcode per output format [af72db80](https://github.com/spf13/hugo/commit/af72db806f2c1c0bf1dfe5832275c41eeba89906) [@bep](https://github.com/bep) [#3220](https://github.com/spf13/hugo/issues/3220) 
* Avoid index.md in /index/index.html [fea4fd86](https://github.com/spf13/hugo/commit/fea4fd86a324bf9679df23f8289887d91b42e919) [@bep](https://github.com/bep) [#3396](https://github.com/spf13/hugo/issues/3396) 
* Prevent decoding pageParam in common cases [e98f885b](https://github.com/spf13/hugo/commit/e98f885b8af27f5473a89d31d0b1f02e61e8a5ec) [@bogem](https://github.com/bogem) 
* Ignore non-source files on partial rebuild [b5b6e81c](https://github.com/spf13/hugo/commit/b5b6e81c0269abf9b0f4bc6a127744a25344e5c6) [@xofyarg](https://github.com/xofyarg) [#3325](https://github.com/spf13/hugo/issues/3325) 

### Docs

* Add documentation on slug translation [635b3bb4](https://github.com/spf13/hugo/commit/635b3bb4eb873978c7d52e6c0cb85da0c4d25299) [@xavib](https://github.com/xavib) 
* Add notes about some output format behaviour [162d3a58](https://github.com/spf13/hugo/commit/162d3a586d36cabf6376a76b096fd8b6414487ae) [@jpatters](https://github.com/jpatters) 

### Other

* Add support for ellipsed paginator [b6ea492b](https://github.com/spf13/hugo/commit/b6ea492b7a6325d04d44eeb00a990a3a0e29e0c0) [@bep](https://github.com/bep) [#3466](https://github.com/spf13/hugo/issues/3466) 
* Skip .git directories [94b5be67](https://github.com/spf13/hugo/commit/94b5be67fc73b87d114d94a7bb1a33ab997f30f1) [@bogem](https://github.com/bogem) [#3468](https://github.com/spf13/hugo/issues/3468) 
* Don't clean path twice [9b080dc6](https://github.com/spf13/hugo/commit/9b080dc62555580b2d8076e0a899eb07016d6692) [@bogem](https://github.com/bogem) 
* Render 404 in default language only [154e18dd](https://github.com/spf13/hugo/commit/154e18ddb9ad205055d5bd4827c87f3f0daf499f) [@mitchchn](https://github.com/mitchchn) [#3075](https://github.com/spf13/hugo/issues/3075) 
* Make first letter of flags' usage lowercase [f0f69d03](https://github.com/spf13/hugo/commit/f0f69d03c551acb8ac2eeedaad579cf0b596f9ef) [@bogem](https://github.com/bogem) 
* Import Octopress image tag in Jekyll importer [5f3ad1c3](https://github.com/spf13/hugo/commit/5f3ad1c31985450fab8d6772e9cbfcb57cf5cc53) [@buynov](https://github.com/buynov) 

## Fixes

### Templates

* Fix error handling in Config [405c2f68](https://github.com/spf13/hugo/commit/405c2f6899fbe008df8ccd45355bd31846cf1b1d) [@bep](https://github.com/bep) 

### Output

* Fix output format mixup in example [10287263](https://github.com/spf13/hugo/commit/10287263f529181d3169668b044cb84e2e3b049a) [@bep](https://github.com/bep) [#3481](https://github.com/spf13/hugo/issues/3481) 
* Fix base theme vs project base template logic [077005e5](https://github.com/spf13/hugo/commit/077005e514b1ed50d84ceb90c7c72f184cb04521) [@bep](https://github.com/bep) [#3323](https://github.com/spf13/hugo/issues/3323) 

### Docs

* Fixed incorrect specification of directory structure [a28fbca6](https://github.com/spf13/hugo/commit/a28fbca6dcfa80b6541f5ef6c8c12cd1804ae9ed) [@TejasQ](https://github.com/TejasQ) 
* Fix bash command in tutorials/github-pages-blog [c9976155](https://github.com/spf13/hugo/commit/c99761555c014e4d041438d5d7e53a6cbaee4492) [@hansott](https://github.com/hansott) 
* Fix typo in templates/functions.md [231c0a7e](https://github.com/spf13/hugo/commit/231c0a7e090e9cc131409c997963f9bffc49204b) [@bogem](https://github.com/bogem) [#3440](https://github.com/spf13/hugo/issues/3440) 
* Fix typos [93a447c5](https://github.com/spf13/hugo/commit/93a447c5dd053e1c934036a66ebd05b95250a1d1) [@tom-harvey](https://github.com/tom-harvey) 
* Fix .Data.Pages range in sample [b5e32eb6](https://github.com/spf13/hugo/commit/b5e32eb60993b4656918af2c959ae217a68c461e) [@hxlnt](https://github.com/hxlnt) 
